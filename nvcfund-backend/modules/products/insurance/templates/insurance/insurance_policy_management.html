{% extends "unified_base.html" %}

{% block title %}Insurance Policy Management - NVC Banking{% endblock %}

{% block extra_css %}

        body {
            background-color: #0a2447;
            color: #ffffff;
            font-family: 'Arial', sans-serif;
        }
        .main-content {
            min-height: 100vh;
            padding: 2rem;
        }
        .card {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border: 1px solid #66ccff;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(102, 204, 255, 0.3);
        }
        .card-header {
            background: linear-gradient(135deg, #0a2447 0%, #1e3c72 100%);
            border-bottom: 1px solid #66ccff;
            color: #66ccff;
            font-weight: bold;
        }
        .policy-card {
            background: rgba(30, 60, 114, 0.3);
            border: 1px solid rgba(102, 204, 255, 0.3);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .policy-card:hover {
            background: rgba(30, 60, 114, 0.5);
            transform: translateY(-2px);
        }
        .policy-type {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: bold;
            text-transform: uppercase;
        }
        .type-life { background: rgba(40, 167, 69, 0.2); color: #28a745; }
        .type-health { background: rgba(23, 162, 184, 0.2); color: #17a2b8; }
        .type-property { background: rgba(255, 193, 7, 0.2); color: #ffc107; }
        .type-liability { background: rgba(220, 53, 69, 0.2); color: #dc3545; }
        .type-disability { background: rgba(108, 117, 125, 0.2); color: #6c757d; }
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: bold;
            text-transform: uppercase;
        }
        .status-active { background: rgba(40, 167, 69, 0.2); color: #28a745; }
        .status-pending { background: rgba(255, 193, 7, 0.2); color: #ffc107; }
        .status-expired { background: rgba(220, 53, 69, 0.2); color: #dc3545; }
        .status-cancelled { background: rgba(108, 117, 125, 0.2); color: #6c757d; }
        .coverage-item {
            background: rgba(30, 60, 114, 0.2);
            border: 1px solid rgba(102, 204, 255, 0.3);
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 8px;
        }
        .premium-display {
            font-size: 1.8em;
            font-weight: bold;
            color: #66ccff;
            text-align: center;
            padding: 15px;
            background: rgba(30, 60, 114, 0.3);
            border-radius: 8px;
            margin: 15px 0;
        }
        .metric-card {
            background: rgba(30, 60, 114, 0.2);
            border: 1px solid rgba(102, 204, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            margin-bottom: 15px;
        }
        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #66ccff;
        }
        .metric-label {
            font-size: 0.9em;
            color: #ccc;
        }
        .btn-primary {
            background: linear-gradient(135deg, #66ccff 0%, #4da6d9 100%);
            border: none;
            color: #0a2447;
            font-weight: bold;
        }
        .form-control, .form-select {
            background: #1e3c72;
            border: 1px solid #66ccff;
            color: #ffffff;
        }
        .form-control:focus, .form-select:focus {
            background: #1e3c72;
            border-color: #66ccff;
            color: #ffffff;
            box-shadow: 0 0 0 0.2rem rgba(102, 204, 255, 0.25);
        }
        .claim-item {
            background: rgba(30, 60, 114, 0.2);
            border: 1px solid rgba(102, 204, 255, 0.3);
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 8px;
        }
        .risk-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        .risk-low { background: #28a745; }
        .risk-medium { background: #ffc107; }
        .risk-high { background: #dc3545; }
    
{% endblock %}

{% block content %}

    <div class="main-content">
        <div class="container-fluid">
            <!-- Header -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h1><i class="fas fa-shield-alt"></i> Insurance Policy Management</h1>
                            <p class="mb-0">Comprehensive insurance portfolio management and risk assessment</p>
                        </div>
                        <div>
                            <button type="button" class="btn nvc-btn nvc-btn-outline-primary me-2">
                                <i class="fas fa-file-contract"></i> New Policy
                            </button>
                            <button type="button" class="btn nvc-btn nvc-btn-primary">
                                <i class="fas fa-chart-line"></i> Risk Assessment
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Portfolio Overview -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="metric-nvc-card">
                        <div class="metric-value">247</div>
                        <div class="metric-label">Active Policies</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-nvc-card">
                        <div class="metric-value">$42.8M</div>
                        <div class="metric-label">Total Coverage</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-nvc-card">
                        <div class="metric-value">$2.4M</div>
                        <div class="metric-label">Annual Premiums</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="metric-nvc-card">
                        <div class="metric-value">92.3%</div>
                        <div class="metric-label">Renewal Rate</div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Policy Portfolio -->
                <div class="col-md-8">
                    <div class="nvc-card mb-4">
                        <div class="nvc-nvc-card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5><i class="fas fa-file-contract"></i> Policy Portfolio</h5>
                                <select class="nvc-form-select" style="width: auto;" onchange="filterPolicies(this.value)">
                                    <option value="all">All Policies</option>
                                    <option value="life">Life Insurance</option>
                                    <option value="health">Health Insurance</option>
                                    <option value="property">Property Insurance</option>
                                    <option value="liability">Liability Insurance</option>
                                </select>
                            </div>
                        </div>
                        <div class="nvc-nvc-card-body">
                            <div class="policy-nvc-card" data-action="custom-action">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="flex-grow-1">
                                        <div class="d-flex align-items-center mb-2">
                                            <h6 class="mb-0 me-3">Whole Life Insurance - Executive Plan</h6>
                                            <span class="policy-type type-life">Life</span>
                                            <span class="status-badge status-active ms-2">Active</span>
                                        </div>
                                        <p class="mb-2 text-light">Policy #LIFE001 â€¢ Insured: John Anderson</p>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <small class="text-light">Coverage:</small>
                                                <div class="fw-bold">$2.5M</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Premium:</small>
                                                <div class="fw-bold">$18,450/year</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Expires:</small>
                                                <div class="fw-bold">2045-12-31</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Risk Level:</small>
                                                <div class="fw-bold">
                                                    <span class="risk-indicator risk-low"></span>Low
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-end">
                                        <button type="button" class="btn btn-sm nvc-btn nvc-btn-outline-primary">Manage</button>
                                    </div>
                                </div>
                            </div>

                            <div class="policy-nvc-card" data-action="custom-action">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="flex-grow-1">
                                        <div class="d-flex align-items-center mb-2">
                                            <h6 class="mb-0 me-3">Corporate Health Insurance</h6>
                                            <span class="policy-type type-health">Health</span>
                                            <span class="status-badge status-active ms-2">Active</span>
                                        </div>
                                        <p class="mb-2 text-light">Policy #HEALTH002 â€¢ Group Coverage: 1,247 employees</p>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <small class="text-light">Coverage:</small>
                                                <div class="fw-bold">$15.8M</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Premium:</small>
                                                <div class="fw-bold">$485,670/year</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Renewal:</small>
                                                <div class="fw-bold">2026-01-01</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Risk Level:</small>
                                                <div class="fw-bold">
                                                    <span class="risk-indicator risk-medium"></span>Medium
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-end">
                                        <button type="button" class="btn btn-sm nvc-btn nvc-btn-outline-primary">Manage</button>
                                    </div>
                                </div>
                            </div>

                            <div class="policy-nvc-card" data-action="custom-action">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="flex-grow-1">
                                        <div class="d-flex align-items-center mb-2">
                                            <h6 class="mb-0 me-3">Commercial Property Insurance</h6>
                                            <span class="policy-type type-property">Property</span>
                                            <span class="status-badge status-pending ms-2">Pending Renewal</span>
                                        </div>
                                        <p class="mb-2 text-light">Policy #PROP003 â€¢ Commercial Buildings Portfolio</p>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <small class="text-light">Coverage:</small>
                                                <div class="fw-bold">$125M</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Premium:</small>
                                                <div class="fw-bold">$1.2M/year</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Expires:</small>
                                                <div class="fw-bold text-warning">2025-07-15</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Risk Level:</small>
                                                <div class="fw-bold">
                                                    <span class="risk-indicator risk-high"></span>High
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-end">
                                        <button type="button" class="btn btn-sm nvc-btn nvc-btn-warning">Renew</button>
                                    </div>
                                </div>
                            </div>

                            <div class="policy-nvc-card" data-action="custom-action">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div class="flex-grow-1">
                                        <div class="d-flex align-items-center mb-2">
                                            <h6 class="mb-0 me-3">Professional Liability Insurance</h6>
                                            <span class="policy-type type-liability">Liability</span>
                                            <span class="status-badge status-active ms-2">Active</span>
                                        </div>
                                        <p class="mb-2 text-light">Policy #LIAB004 â€¢ Directors & Officers Coverage</p>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <small class="text-light">Coverage:</small>
                                                <div class="fw-bold">$50M</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Premium:</small>
                                                <div class="fw-bold">$785,000/year</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Expires:</small>
                                                <div class="fw-bold">2026-03-15</div>
                                            </div>
                                            <div class="col-md-3">
                                                <small class="text-light">Risk Level:</small>
                                                <div class="fw-bold">
                                                    <span class="risk-indicator risk-medium"></span>Medium
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-end">
                                        <button type="button" class="btn btn-sm nvc-btn nvc-btn-outline-primary">Manage</button>
                                    </div>
                                </div>
                            </div>

                            <div class="text-center mt-3">
                                <button type="button" class="btn nvc-btn nvc-btn-outline-primary">
                                    <i class="fas fa-eye"></i> View All Policies (247)
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Claims Management -->
                    <div class="nvc-card">
                        <div class="nvc-nvc-card-header">
                            <h5><i class="fas fa-clipboard-list"></i> Recent Claims</h5>
                        </div>
                        <div class="nvc-nvc-card-body">
                            <div class="claim-item">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>Property Damage Claim</strong>
                                        <div class="text-light small">Policy #PROP003 â€¢ Filed: 2025-06-28</div>
                                    </div>
                                    <div class="text-end">
                                        <div class="fw-bold">$245,000</div>
                                        <span class="status-badge status-pending">Under Review</span>
                                    </div>
                                </div>
                            </div>

                            <div class="claim-item">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>Medical Expense Claim</strong>
                                        <div class="text-light small">Policy #HEALTH002 â€¢ Filed: 2025-06-25</div>
                                    </div>
                                    <div class="text-end">
                                        <div class="fw-bold">$18,750</div>
                                        <span class="status-badge status-active">Approved</span>
                                    </div>
                                </div>
                            </div>

                            <div class="claim-item">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>Liability Settlement</strong>
                                        <div class="text-light small">Policy #LIAB004 â€¢ Filed: 2025-06-20</div>
                                    </div>
                                    <div class="text-end">
                                        <div class="fw-bold">$1.2M</div>
                                        <span class="status-badge status-active">Settled</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Risk Analysis & Coverage -->
                <div class="col-md-4">
                    <div class="nvc-card mb-4">
                        <div class="nvc-nvc-card-header">
                            <h5><i class="fas fa-chart-pie"></i> Coverage Breakdown</h5>
                        </div>
                        <div class="nvc-nvc-card-body">
                            <div class="premium-display">$42.8M</div>
                            <p class="text-center text-light">Total Coverage Value</p>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-heartbeat text-danger"></i> Life Insurance</span>
                                    <span class="fw-bold">$15.2M</span>
                                </div>
                                <div class="progress mt-2" class="nvc-h-4">
                                    <div class="progress-bar bg-danger" class="progress-bar-35"></div>
                                </div>
                            </div>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-user-md text-info"></i> Health Insurance</span>
                                    <span class="fw-bold">$8.9M</span>
                                </div>
                                <div class="progress mt-2" class="nvc-h-4">
                                    <div class="progress-bar bg-info" class="progress-bar-21"></div>
                                </div>
                            </div>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-building text-warning"></i> Property Insurance</span>
                                    <span class="fw-bold">$14.7M</span>
                                </div>
                                <div class="progress mt-2" class="nvc-h-4">
                                    <div class="progress-bar bg-warning" class="progress-bar-34"></div>
                                </div>
                            </div>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between">
                                    <span><i class="fas fa-gavel text-success"></i> Liability Insurance</span>
                                    <span class="fw-bold">$4.0M</span>
                                </div>
                                <div class="progress mt-2" class="nvc-h-4">
                                    <div class="progress-bar bg-success" class="progress-bar-10"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="nvc-card mb-4">
                        <div class="nvc-nvc-card-header">
                            <h5><i class="fas fa-exclamation-triangle"></i> Risk Assessment</h5>
                        </div>
                        <div class="nvc-nvc-card-body">
                            <div class="text-center">
                                <div class="display-4 text-warning mb-3">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <h6>Medium Risk Portfolio</h6>
                                <p class="text-light">Overall risk score: 6.2/10</p>
                            </div>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between">
                                    <span>Market Risk</span>
                                    <span class="fw-bold text-warning">Medium</span>
                                </div>
                            </div>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between">
                                    <span>Operational Risk</span>
                                    <span class="fw-bold text-success">Low</span>
                                </div>
                            </div>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between">
                                    <span>Credit Risk</span>
                                    <span class="fw-bold text-danger">High</span>
                                </div>
                            </div>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between">
                                    <span>Regulatory Risk</span>
                                    <span class="fw-bold text-warning">Medium</span>
                                </div>
                            </div>

                            <div class="mt-3">
                                <button type="button" class="btn nvc-btn nvc-btn-outline-primary btn-sm w-100">
                                    <i class="fas fa-chart-line"></i> Full Risk Analysis
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="nvc-card">
                        <div class="nvc-nvc-card-header">
                            <h5><i class="fas fa-calendar-alt"></i> Upcoming Renewals</h5>
                        </div>
                        <div class="nvc-nvc-card-body">
                            <div class="coverage-item">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>Commercial Property</strong>
                                        <div class="text-light small">Policy #PROP003</div>
                                    </div>
                                    <div class="text-end">
                                        <div class="fw-bold text-warning">11 days</div>
                                        <div class="text-light small">Jul 15, 2025</div>
                                    </div>
                                </div>
                            </div>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>Executive Life</strong>
                                        <div class="text-light small">Policy #LIFE005</div>
                                    </div>
                                    <div class="text-end">
                                        <div class="fw-bold">45 days</div>
                                        <div class="text-light small">Aug 18, 2025</div>
                                    </div>
                                </div>
                            </div>

                            <div class="coverage-item">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <strong>Health Insurance</strong>
                                        <div class="text-light small">Policy #HEALTH002</div>
                                    </div>
                                    <div class="text-end">
                                        <div class="fw-bold">178 days</div>
                                        <div class="text-light small">Jan 1, 2026</div>
                                    </div>
                                </div>
                            </div>

                            <div class="text-center mt-3">
                                <button type="button" class="btn nvc-btn nvc-btn-outline-primary btn-sm">
                                    <i class="fas fa-bell"></i> Set Renewal Alerts
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function filterPolicies(type) {
            console.log('Filtering policies by type:', type);
            // In production, this would filter the policy list
        }

        function openPolicyDetails(policyId) {
            console.log('Opening policy details for:', policyId);
            // In production, this would open detailed policy information
        }

        function renewPolicy(policyId) {
            if (confirm('Start renewal process for policy ' + policyId + '?')) {
                alert('Renewal process initiated for policy ' + policyId);
            }
        }

        function fileClai (policyId) {
            alert('Opening claim filing form for policy ' + policyId);
        }

        // Real-time policy monitoring
        setInterval(function() {
            console.log('Checking policy status updates...');
        }, 30000);

        // Risk assessment updates
        setInterval(function() {
            console.log('Updating risk assessment metrics...');
        }, 60000);
    </script>

{% endblock %}

{% block extra_js %}

{% endblock %}
