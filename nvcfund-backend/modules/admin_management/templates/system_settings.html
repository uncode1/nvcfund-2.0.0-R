{% extends "unified_base.html" %}
{% from "components/nvc_components.html" import metric_card, action_card, account_card, transaction_row, form_input, form_select, notification_banner, progress_bar, stats_grid, loading_spinner, empty_state %}


{% block title %}System Settings - NVC Banking & Crypto Platform{% endblock %}

{% block page_title %}System Configuration{% endblock %}
{% block page_description %}Advanced system settings for modern banking and cryptocurrency operations{% endblock %}

{% block page_actions %}
<button type="button" class="nvc-btn nvc-btn-outline-enterprise" data-action="custom-action">
    <i class="fas fa-download"></i>
    Export Config
</button>
<button type="button" class="nvc-btn nvc-btn-secondary-enterprise" data-action="custom-action">
    <i class="fas fa-shield-alt"></i>
    Backup
</button>
<button type="button" class="nvc-btn nvc-btn-primary-enterprise" data-action="custom-action">
    <i class="fas fa-save"></i>
    Save Changes
</button>
{% endblock %}

{% block extra_css %}
<style>
    .settings-section {
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid rgba(96, 165, 250, 0.2);
        border-radius: 12px;
        padding: 2rem;
        margin-bottom: 2rem;
        backdrop-filter: blur(10px);
    }

    .settings-header {
        background: rgba(255,255,255,0.1);
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.2);
    }
    
    .settings-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
    }
    
    .settings-card {
        background: rgba(255,255,255,0.1);
        border-radius: 15px;
        padding: 25px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.2);
    }
    
    .settings-card h3 {
        color: #66ccff;
        margin-bottom: 20px;
        border-bottom: 2px solid #66ccff;
        padding-bottom: 10px;
    }
    
    .setting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 0;
        border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .setting-item:last-child {
        border-bottom: none;
    }
    
    .setting-label {
        font-weight: 500;
        color: #ffffff;
    }
    
    .setting-control {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .toggle-switch {
        position: relative;
        width: 50px;
        height: 25px;
        background-color: #374151;
        border-radius: 25px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    
    .toggle-switch.active {
        background-color: #00ff88;
    }
    
    .toggle-switch::after {
        content: '';
        position: absolute;
        top: 2px;
        left: 2px;
        width: 21px;
        height: 21px;
        background-color: #ffffff;
        border-radius: 50%;
        transition: transform 0.3s;
    }
    
    .toggle-switch.active::after {
        transform: translateX(25px);
    }
    
    .setting-input {
        background: rgba(255,255,255,0.1);
        border: 1px solid rgba(255,255,255,0.3);
        border-radius: 8px;
        padding: 8px 12px;
        color: #ffffff;
        width: 120px;
    }
    
    .save-button {
        background: #66ccff;
        color: #0a2447;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 20px;
    }
    
    .save-button:hover {
        background: #4db8ff;
        transform: scale(1.05);
    }
    
    .danger-zone {
        background: rgba(255,68,68,0.2);
        border: 2px solid #ff4444;
        border-radius: 15px;
        padding: 25px;
        margin-top: 30px;
    }
    
    .danger-zone h3 {
        color: #ff4444;
        margin-bottom: 15px;
    }
    
    .danger-button {
        background: #ff4444;
        color: #ffffff;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: bold;
        cursor: pointer;
        margin-right: 10px;
        transition: all 0.3s ease;
    }
    
    .danger-button:hover {
        background: #cc0000;
    }
</style>
{% endblock %}

{% block content %}
<div class="nvc-page-content">
    <!-- Modern Banking & Crypto Platform Settings -->
<div class="row g-4">
    <!-- Core Banking Settings -->
    <div class="col-xl-6">
        <div class="settings-section">
            <h3 class="section-title">
                <i class="fas fa-university text-primary"></i>
                Core Banking Configuration
            </h3>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>Real-time Processing</strong>
                    <small class="text-muted d-block">Enable instant transaction processing</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="realTimeProcessing" checked>
                        <label class="form-check-label" for="realTimeProcessing"></label>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>Multi-Currency Support</strong>
                    <small class="text-muted d-block">Support for 150+ global currencies</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="multiCurrency" checked>
                        <label class="form-check-label" for="multiCurrency"></label>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>SWIFT Integration</strong>
                    <small class="text-muted d-block">International wire transfers</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="swiftIntegration" checked>
                        <label class="form-check-label" for="swiftIntegration"></label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cryptocurrency Settings -->
    <div class="col-xl-6">
        <div class="settings-section">
            <h3 class="section-title">
                <i class="fab fa-bitcoin text-warning"></i>
                Cryptocurrency Operations
            </h3>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>Digital Asset Trading</strong>
                    <small class="text-muted d-block">Enable crypto trading platform</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="cryptoTrading" checked>
                        <label class="form-check-label" for="cryptoTrading"></label>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>NVCT Stablecoin</strong>
                    <small class="text-muted d-block">Native stablecoin operations</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="nvctStablecoin" checked>
                        <label class="form-check-label" for="nvctStablecoin"></label>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>DeFi Integration</strong>
                    <small class="text-muted d-block">Decentralized finance protocols</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="defiIntegration">
                        <label class="form-check-label" for="defiIntegration"></label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Security & Compliance -->
    <div class="col-xl-6">
        <div class="settings-section">
            <h3 class="section-title">
                <i class="fas fa-shield-alt text-success"></i>
                Security & Compliance
            </h3>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>Multi-Factor Authentication</strong>
                    <small class="text-muted d-block">Mandatory 2FA for all users</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="mandatoryMFA" checked>
                        <label class="form-check-label" for="mandatoryMFA"></label>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>AML/KYC Automation</strong>
                    <small class="text-muted d-block">Automated compliance screening</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="amlKycAuto" checked>
                        <label class="form-check-label" for="amlKycAuto"></label>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>Biometric Authentication</strong>
                    <small class="text-muted d-block">Fingerprint & facial recognition</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="biometricAuth">
                        <label class="form-check-label" for="biometricAuth"></label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- API & Integration Settings -->
    <div class="col-xl-6">
        <div class="settings-section">
            <h3 class="section-title">
                <i class="fas fa-plug text-info"></i>
                API & Integrations
            </h3>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>Open Banking APIs</strong>
                    <small class="text-muted d-block">PSD2 compliant API access</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="openBankingAPI" checked>
                        <label class="form-check-label" for="openBankingAPI"></label>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>Blockchain Oracles</strong>
                    <small class="text-muted d-block">Real-time price feeds</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="blockchainOracles" checked>
                        <label class="form-check-label" for="blockchainOracles"></label>
                    </div>
                </div>
            </div>

            <div class="setting-item">
                <div class="setting-label">
                    <strong>Third-party Integrations</strong>
                    <small class="text-muted d-block">External service connections</small>
                </div>
                <div class="setting-control">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="thirdPartyIntegrations" checked>
                        <label class="form-check-label" for="thirdPartyIntegrations"></label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced Configuration -->
    <div class="col-12">
        <div class="settings-section">
            <h3 class="section-title">
                <i class="fas fa-cogs text-secondary"></i>
                Advanced Configuration
            </h3>

            <div class="row g-3">
                <div class="col-md-4">
                    <label class="nvc-form-label">Session Timeout (minutes)</label>
                    <input type="number" class="nvc-form-input" value="30" min="5" max="120">
                </div>
                <div class="col-md-4">
                    <label class="nvc-form-label">Max Login Attempts</label>
                    <input type="number" class="nvc-form-input" value="5" min="3" max="10">
                </div>
                <div class="col-md-4">
                    <label class="nvc-form-label">Transaction Limit (USD)</label>
                    <input type="number" class="nvc-form-input" value="100000" min="1000" max="1000000">
                </div>
            </div>
        </div>
    </div>

    <!-- System Status -->
    <div class="col-12">
        <div class="settings-section">
            <h3 class="section-title">
                <i class="fas fa-heartbeat text-danger"></i>
                System Status
            </h3>

            <div class="row g-3">
                <div class="col-md-3">
                    <div class="status-nvc-card">
                        <div class="status-indicator bg-success"></div>
                        <h6>Core Banking</h6>
                        <span class="text-success">Operational</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="status-nvc-card">
                        <div class="status-indicator bg-success"></div>
                        <h6>Crypto Engine</h6>
                        <span class="text-success">Operational</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="status-nvc-card">
                        <div class="status-indicator bg-warning"></div>
                        <h6>DeFi Bridge</h6>
                        <span class="text-warning">Maintenance</span>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="status-nvc-card">
                        <div class="status-indicator bg-success"></div>
                        <h6>Security Layer</h6>
                        <span class="text-success">Operational</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Modern Banking & Crypto Platform Settings JavaScript

// Save all settings function
function saveAllSettings() {
    const settings = {
        realTimeProcessing: document.getElementById('realTimeProcessing').checked,
        multiCurrency: document.getElementById('multiCurrency').checked,
        swiftIntegration: document.getElementById('swiftIntegration').checked,
        cryptoTrading: document.getElementById('cryptoTrading').checked,
        nvctStablecoin: document.getElementById('nvctStablecoin').checked,
        defiIntegration: document.getElementById('defiIntegration').checked,
        mandatoryMFA: document.getElementById('mandatoryMFA').checked,
        amlKycAuto: document.getElementById('amlKycAuto').checked,
        biometricAuth: document.getElementById('biometricAuth').checked,
        openBankingAPI: document.getElementById('openBankingAPI').checked,
        blockchainOracles: document.getElementById('blockchainOracles').checked,
        thirdPartyIntegrations: document.getElementById('thirdPartyIntegrations').checked
    };

    // Show success notification
    showNotification('Settings saved successfully!', 'success');
    console.log('Saving platform settings:', settings);
}

// Export configuration
function exportSettings() {
    const config = {
        timestamp: new Date().toISOString(),
        platform: 'NVC Banking & Crypto Platform',
        version: '2.0.0',
        settings: {
            banking: {
                realTimeProcessing: true,
                multiCurrency: true,
                swiftIntegration: true
            },
            crypto: {
                trading: true,
                nvctStablecoin: true,
                defiIntegration: false
            },
            security: {
                mandatoryMFA: true,
                amlKyc: true,
                biometric: false
            }
        }
    };

    const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'nvc-platform-config.json';
    a.click();
    URL.revokeObjectURL(url);

    showNotification('Configuration exported successfully!', 'info');
}

// Backup settings
function backupSettings() {
    showNotification('Creating system backup...', 'info');

    // Simulate backup process
    setTimeout(() => {
        showNotification('System backup completed successfully!', 'success');
    }, 2000);
}

// Show notification function
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `alert alert-${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'info'} alert-dismissible fade show position-fixed`;
    notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
    notification.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;

    document.body.appendChild(notification);

    // Auto remove after 5 seconds
    setTimeout(() => {
        if (notification.parentNode) {
            notification.remove();
        }
    }, 5000);
}

// Initialize status indicators
document.addEventListener('DOMContentLoaded', function() {
    // Add status card styling
    const style = document.createElement('style');
    style.textContent = `
        .status-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(96, 165, 250, 0.2);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            position: relative;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            position: absolute;
            top: 10px;
            right: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .setting-item:last-child {
            border-bottom: none;
        }
    `;
    document.head.appendChild(style);
});
</script>
{% endblock %}