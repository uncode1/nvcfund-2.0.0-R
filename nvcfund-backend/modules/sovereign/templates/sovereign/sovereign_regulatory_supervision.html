{% extends "unified_base.html" %}

{% block title %}Banking Regulation & Supervision{% endblock %}

{% block extra_css %}

        body { background: #0f172a; color: #e2e8f0; font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', system-ui, sans-serif; }
        .card { background: #1e293b; border: 1px solid #334155; color: #e2e8f0; }
        .card-header { background: #1e293b; border-bottom: 1px solid #334155; }
        .card-body { background: #1e293b; }
        .bg-primary { background: #3b82f6 !important; }
        .bg-success { background: #10b981 !important; }
        .bg-info { background: #06b6d4 !important; }
        .bg-warning { background: #f59e0b !important; }
        .bg-danger { background: #ef4444 !important; }
        .text-white { color: #ffffff !important; }
        .text-white-50 { color: rgba(255, 255, 255, 0.5) !important; }
        .text-primary { color: #3b82f6 !important; }
        .text-light { color: #e2e8f0 !important; }
        .border-0 { border: 0 !important; }
        .border-top { border-top: 1px solid #334155; }
        .main-content { padding: 20px; }
        .h3 { font-size: 1.75rem; }
        .me-2 { margin-right: 0.5rem; }
        .me-1 { margin-right: 0.25rem; }
        .mb-0 { margin-bottom: 0; }
        .mb-4 { margin-bottom: 1.5rem; }
        .mb-3 { margin-bottom: 1rem; }
        .pt-3 { padding-top: 1rem; }
        .align-items-center { align-items: center; }
        .justify-content-between { justify-content: space-between; }
        .d-flex { display: flex; }
        .flex-grow-1 { flex-grow: 1; }
        .text-center { text-align: center; }
        .fw-bold { font-weight: 700; }
        .table-dark { background: #1e293b; color: #e2e8f0; }
        .table-dark th { border-color: #374151; }
        .table-dark td { border-color: #374151; }
        .badge { font-size: 0.75rem; }
        .progress { background: #374151; height: 6px; }
        .progress-bar { background: #3b82f6; }
    
{% endblock %}

{% block content %}

<div class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0 text-white">
            <i class="fas fa-shield-alt text-primary me-2"></i>
            Banking Regulation & Supervision
        </h1>
        <div class="text-white-50">
            <i class="fas fa-building me-1"></i>
            {{ regulatory_data.banking_sector_overview.total_banks }} Banks Under Supervision
        </div>
    </div>

    <!-- Regulatory Framework -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-percentage me-2"></i>
                        Capital Requirements
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Minimum Capital Ratio:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.minimum_capital_ratio) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Conservation Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.capital_conservation_buffer) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Countercyclical Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.countercyclical_buffer) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Systemic Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.systemic_buffer) }%}</span>
                        </div>
                    </div>
                    <div class="border-top pt-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light fw-bold">Total Requirement:</span>
                            <span class="fw-bold text-primary">{{ "%.1f"|format(regulatory_data.regulatory_framework.capital_requirements.total_capital_requirement) }%}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-tint me-2"></i>
                        Liquidity Requirements
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">LCR Minimum:</span>
                            <span class="fw-bold">{{ "%.0f"|format(regulatory_data.regulatory_framework.liquidity_requirements.liquidity_coverage_ratio) }%}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">NSFR Minimum:</span>
                            <span class="fw-bold">{{ "%.0f"|format(regulatory_data.regulatory_framework.liquidity_requirements.net_stable_funding_ratio) }%}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Liquidity Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.liquidity_requirements.liquidity_buffer_requirement) }%}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-balance-scale me-2"></i>
                        Leverage Requirements
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Minimum Ratio:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.leverage_requirements.leverage_ratio_minimum) }%}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-light">SIFI Buffer:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.regulatory_framework.leverage_requirements.buffer_for_systemically_important) }%}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Banking Sector Overview -->
    <div class="row mb-4">
        <div class="col-md-8">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-warning text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-building me-2"></i>
                        Banking Sector Overview
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-light mb-1">Total Banks</h6>
                                <h4 class="text-primary">{{ regulatory_data.banking_sector_overview.total_banks }}</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-light mb-1">SIFI Banks</h6>
                                <h4 class="text-warning">{{ regulatory_data.banking_sector_overview.systemically_important_banks }}</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-light mb-1">Foreign Banks</h6>
                                <h4 class="text-info">{{ regulatory_data.banking_sector_overview.foreign_banks }}</h4>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="text-center p-3 border rounded">
                                <h6 class="text-light mb-1">Total Assets</h6>
                                <h4 class="text-success">${{ "%.1f"|format(regulatory_data.banking_sector_overview.total_assets_trillions) }}T</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-secondary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-chart-pie me-2"></i>
                        Market Concentration
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Top 5 Banks Share:</span>
                            <span class="fw-bold">{{ "%.1f"|format(regulatory_data.banking_sector_overview.sector_concentration.top_5_banks_market_share) }%}</span>
                        </div>
                        <div class="progress mt-2" class="nvc-h-6">
                            <div class="progress-bar bg-warning" style="width: {{ regulatory_data.banking_sector_overview.sector_concentration.top_5_banks_market_share }%}"></div>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Herfindahl Index:</span>
                            <span class="fw-bold">{{ "%.2f"|format(regulatory_data.banking_sector_overview.sector_concentration.herfindahl_index) }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Supervisory Activities -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-danger text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-search me-2"></i>
                        On-Site Examinations
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Scheduled 2025:</span>
                            <span class="fw-bold">{{ regulatory_data.supervisory_activities.on_site_examinations.scheduled_examinations_2025 }}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Completed YTD:</span>
                            <span class="fw-bold text-success">{{ regulatory_data.supervisory_activities.on_site_examinations.completed_ytd }}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Follow-up Actions:</span>
                            <span class="fw-bold text-warning">{{ regulatory_data.supervisory_activities.on_site_examinations.follow_up_actions }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-desktop me-2"></i>
                        Off-Site Monitoring
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Monthly Reports:</span>
                            <span class="fw-bold">{{ regulatory_data.supervisory_activities.off_site_monitoring.monthly_reports_reviewed }}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Stress Tests:</span>
                            <span class="fw-bold">{{ regulatory_data.supervisory_activities.off_site_monitoring.quarterly_stress_tests }}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Early Warnings:</span>
                            <span class="fw-bold text-warning">{{ regulatory_data.supervisory_activities.off_site_monitoring.early_warning_indicators }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-dark text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-gavel me-2"></i>
                        Enforcement Actions
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Formal Actions YTD:</span>
                            <span class="fw-bold text-danger">{{ regulatory_data.supervisory_activities.enforcement_actions.formal_actions_ytd }}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Informal Actions YTD:</span>
                            <span class="fw-bold text-warning">{{ regulatory_data.supervisory_activities.enforcement_actions.informal_actions_ytd }}</span>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between">
                            <span class="text-light">Penalties Collected:</span>
                            <span class="fw-bold text-success">${{ "%.1f"|format(regulatory_data.supervisory_activities.enforcement_actions.penalty_collections_millions) }}M</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Financial Stability Indicators -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-heartbeat me-2"></i>
                        Financial Stability Indicators
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <div class="row">
                        <div class="col-md-3">
                            <h6 class="text-light mb-3">Capital Adequacy</h6>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">Avg Capital Ratio:</span>
                                    <span class="fw-bold text-success">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.capital_adequacy.avg_capital_ratio) }%}</span>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">Below Requirement:</span>
                                    <span class="fw-bold text-success">{{ regulatory_data.financial_stability_indicators.capital_adequacy.banks_below_requirement }}</span>
                                </div>
                            </div>
                            <div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">Tier 1 Ratio:</span>
                                    <span class="fw-bold">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.capital_adequacy.tier_1_capital_ratio) }%}</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <h6 class="text-light mb-3">Asset Quality</h6>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">NPL Ratio:</span>
                                    <span class="fw-bold text-success">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.asset_quality.non_performing_loans) }%}</span>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">Provision Coverage:</span>
                                    <span class="fw-bold">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.asset_quality.provision_coverage) }%}</span>
                                </div>
                            </div>
                            <div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">Loan Loss Provisions:</span>
                                    <span class="fw-bold">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.asset_quality.loan_loss_provisions) }%}</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <h6 class="text-light mb-3">Profitability</h6>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">ROA:</span>
                                    <span class="fw-bold text-success">{{ "%.2f"|format(regulatory_data.financial_stability_indicators.profitability.return_on_assets) }%}</span>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">ROE:</span>
                                    <span class="fw-bold text-success">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.profitability.return_on_equity) }%}</span>
                                </div>
                            </div>
                            <div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">Net Interest Margin:</span>
                                    <span class="fw-bold">{{ "%.2f"|format(regulatory_data.financial_stability_indicators.profitability.net_interest_margin) }%}</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <h6 class="text-light mb-3">Liquidity</h6>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">Avg LCR:</span>
                                    <span class="fw-bold text-success">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.liquidity.avg_liquidity_ratio) }%}</span>
                                </div>
                            </div>
                            <div class="mb-2">
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">Loan-to-Deposit:</span>
                                    <span class="fw-bold">{{ "%.1f"|format(regulatory_data.financial_stability_indicators.liquidity.loan_to_deposit_ratio) }%}</span>
                                </div>
                            </div>
                            <div>
                                <div class="d-flex justify-content-between">
                                    <span class="text-light">Funding Stability:</span>
                                    <span class="badge bg-success">{{ regulatory_data.financial_stability_indicators.liquidity.funding_stability }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Regulatory Developments -->
    <div class="row">
        <div class="col-md-6">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-primary text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-calendar-plus me-2"></i>
                        Upcoming Regulations
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <ul class="list-unstyled mb-0">
                        {% for regulation in regulatory_data.regulatory_developments.upcoming_regulations %}
                        <li class="mb-2">
                            <i class="fas fa-clock text-primary me-2"></i>
                            {{ regulation }}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="nvc-card border-0">
                <div class="nvc-nvc-card-header bg-info text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-globe me-2"></i>
                        International Coordination
                    </h5>
                </div>
                <div class="nvc-nvc-card-body">
                    <ul class="list-unstyled mb-0">
                        {% for coordination in regulatory_data.regulatory_developments.international_coordination %}
                        <li class="mb-2">
                            <i class="fas fa-handshake text-info me-2"></i>
                            {{ coordination }}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}

{% block extra_js %}

{% endblock %}
